databaseChangeLog:
  - changeSet:
      id: 01 - create tables
      author: verspaetung-transport
      changes:
        - createTable:
            tableName: delays
            columns:
              - column:
                  name: line_name
                  type: varchar(100)
                  constraints:
                    primaryKey: true
                    primaryKeyName: delays_pk
              - column:
                  name: delay
                  type: integer

        - createTable:
            tableName: lines
            columns:
              - column:
                  name: line_id
                  type: bigint
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    primaryKeyName: lines_pk
              - column:
                  name: line_name
                  type: varchar(100)

        - createTable:
            tableName: stops
            columns:
              - column:
                  name: stop_id
                  type: bigint
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    primaryKeyName: stops_pk
              - column:
                  name: x
                  type: integer
              - column:
                  name: y
                  type: integer

        - createTable:
            tableName: times
            columns:
              - column:
                  name: line_id
                  type: bigint
                  constraints:
                    nullable: false
                    references: lines(line_id)
                    foreignKeyName: times_lines_fk
              - column:
                  name: stop_id
                  type: bigint
                  constraints:
                    nullable: false
                    references: stops(stop_id)
                    foreignKeyName: times_stops_fk
              - column:
                  name: time
                  type: time
        - addPrimaryKey:
            columnNames: line_id, stop_id
            constraintName: times_pk
            tableName: times